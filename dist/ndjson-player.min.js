"use strict";class Utils{static htmlNode(e){const t=Utils.newNode("template");return t.innerHTML=e.trim(),t.content.firstChild}static newNode(e){return document.createElement(e)}static node(e,t){return void 0===t&&(t=document),e instanceof Node?e:t.querySelector(e)}static isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}static isSelectorID(e){return 0===(e+"").trim().indexOf("#")}static isPlainObject(e){return Utils.isObject(e)&&!Utils.isArray(e)}static isObject(e){return"object"==typeof e}static isArray(e){return Array.isArray(e)}static isFunction(e){return"function"==typeof e}static isHtml(e){return-1!==(e+"").trim().indexOf("<")}static isEmpty(e){return void 0===e||Utils.isObject(e)&&0===Object.keys(e).length||""===e}}class M2D2{root;constructor(e){this.root=e.root||"body",this.template=e.template||{},this.data=e.data||[],this._init()}static _ext={};static extend(e){Object.assign(M2D2._ext,e)}update(e,t,i){const o=this;if(o._rendered){const n=function(e){let n;if(void 0!==e._node)if(Utils.isArray(e))if(void 0===i)void 0!==e[t]._node&&e[t]._node.remove();else{let t;const i=[];for(t in e._node.childNodes)n=e._node.childNodes[t],n&&void 0!==n.tagName&&"TEMPLATE"!==n.tagName&&i.push(n);for(t in i)n=i[t],n.remove();o._doRender(e._node,e)}else{const n={};n[t]=i.value,"items"!==t||void 0===e.template||Utils.isEmpty(e.template)||(n.template=e.template),o._doRender(e._node,n)}else o._doRender(o.$root,e)};void 0===t&&Utils.isFunction(o._func)?o._doFunc(o._func,e,(function(e){n(e)})):n(e)}}get(){return this._defineProp(this._data,"m2d2",this),this._setProxy(),this._data}clear(){const e=this;e._rendered&&(e.$root.innerHTML=e._cache)}$root=null;_rendered=!1;_updater=!0;_cache=null;_data=null;_func=null;_htmlGenTags=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","map","mark","menu","meter","nav","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","samp","section","select","small","span","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","tr","tt","ul","var"];_init(){const e=this;if(Utils.isFunction(e._data)){e._func=e._data;let t=e._doFunc(e._func,e.param);t&&(Utils.isArray(t)&&(t={items:t}),e._data=t,e._rendered||e._onReady())}else Utils.isObject(e._data)||(e._data={text:e._data}),e._onReady()}_render(){const e=this;if(void 0===e._data)return console.log("data is missing in m2d2 object with root: "+e.root),!1;e._doRender(e.$root,e._data),e._rendered=!0}_onReady(){const e=this;e.$root=Utils.node(e.root),e.$root?(e._cache=e.$root.innerHTML,e._render()):console.log("Warning: Node was not found: "+e.root)}_doFunc(e,t,i){const o=this;let n=e((function(e,t,n){let s,l=void 0!==o._data._proxy;if(void 0!==n&&Utils.isNumeric(n)?s=n:void 0!==t&&Utils.isNumeric(t)&&(s=t),Utils.isArray(e)){const i={};void 0===t||Utils.isNumeric(t)?void 0!==o.template&&(i.template=o.template):i.template=t,i.items=e,e=i}if(Utils.isPlainObject(e)){o._updater=!1,l||(o._data={});for(let t in e)o._data[t]=e[t];o._updater=!0}if(void 0===s&&o.interval>0&&(s=o.interval),s>0){const e=function(){o._func((function(e){o._doRender(o.$root,e)}))};o.interval=setInterval(e,s)}o._onReady(),void 0!==i&&i(e)}),t)||{};return Utils.isFunction(o._data)||(n=o._data),Utils.isArray(n)&&(n={items:n}),Utils.isObject(n)||console.log("Undefined type of 'data'. For automatic detection do not set any 'return' in the data's function. Or explicitly return '[]' for arrays or '{}' for objects."),n}_setProxy(){const e=this;void 0===e._data._proxy&&(Utils.isPlainObject(e._data)||Utils.isArray(e._data))&&(e._data=e._proxy(e._data,(function(t,i,o){"m2d2"!==i&&"_"!==i[0]&&e._updater&&e.update(t,i,o)})))}_doRender(e,t,i){void 0===i&&(i=!1),t&&void 0!==t.oninit&&Utils.isFunction(t.oninit)&&(t.oninit(),delete t.oninit),Utils.isArray(t)&&(t={items:t}),this._setProxy(),this._setValues(e,t,i),t&&void 0!==t.onrender&&Utils.isFunction(t.onrender)&&(t.onrender(),delete t.onrender)}_doArray(e,t,i,o){const n=this;void 0===o&&(o=!1),n._setNode(e,i);let s=n._getTemplate(e,t);for(let l=0;l<(i.length||Object.keys(i).length);l++){let a=i[l]||Object.values(i)[l];if(void 0!==a._node&&(a._node=void 0),!s)if("SELECT"===e.tagName||"DATALIST"===e.tagName)s="<option>","string"==typeof a&&(a={text:a,value:a});else if("UL"===e.tagName||"OL"===e.tagName)s="<li>";else if("NAV"===e.tagName)s="<a>";else{if(!Utils.isPlainObject(a))return console.log("Warning: No template found for object:"),console.log(e),void console.log(t);if(1!==Object.keys(a).length)return console.log("Warning: Multiple keys in data without template is not supported yet. Object:"),void console.log(t);if(Utils.isSelectorID(a)){const e=document.querySelector(a);if(!e)return console.log("Warning: ID selector for template not found: "+a+" . Object:"),void console.log(t);s=e.outerHTML}else s=Utils.newNode(Object.keys(a)[0]).outerHTML}const r=Utils.htmlNode(s);r.setAttribute("data-id",l),e.append(r),n._setValues(r,a,o)}}_getTemplate(e,t){const i=this;if(void 0!==t._template&&""!==t._template)return t._template;{let o;if(void 0!==t.template?Utils.isPlainObject(t.template)?(o=Utils.newNode("div"),i._setValues(o,t.template,!0)):o=Utils.isSelectorID(t.template)?document.querySelector(t.template):Utils.isHtml(t.template)?Utils.htmlNode("<template>"+t.template+"</template>"):Utils.htmlNode("<template>"+Utils.newNode(t.template).outerHTML+"</template>"):o=Utils.node("template",e),o){const e=o.innerHTML.trim();return i._defineProp(t,"_template",e),e}return e.innerHTML.trim()}}_setValues(e,t,i){const o=this;if(void 0===i&&(i=!1),Utils.isArray(t)&&(t={items:t}),Utils.isPlainObject(t)){o._setNode(e,t),t.hasOwnProperty("html")&&null!==t.html&&o._setValue(e,"html",t.html),t.hasOwnProperty("template")?(e.append(Utils.htmlNode("<template>"+o._getTemplate(e,t)+"</template>")),t.hasOwnProperty("items")||(t.items=[])):t.hasOwnProperty("items")&&console.log("Warning: 'items' specified but no template found.");for(let n in t){const s=t[n];if("html"===n||"template"===n||n.startsWith("_"));else if("items"===n)o._doArray(e,t,s,i);else if("items"!==n||Utils.isArray(s)||(console.log("Warning: 'items' specified but value is not and array in element: "),console.log(e),console.log("Passed values are: "),console.log(s)),void 0!==M2D2._ext[n]&&Utils.isFunction(M2D2._ext[n])){const t=M2D2._ext[n](s,e);t&&o._setValues(e,t,i)}else if("#"===n[0])o._doRender(Utils.node(n),s,i);else if(Utils.isArray(s)&&2===s.length&&void 0!==s[0]._node){let t=s[0]._update||null;void 0===e._orig_update&&(e._orig_update=t,s[0]._update=function(){o._data[n]=s[0][s[1]],null!==e._orig_update&&e._orig_update()}),o._setValue(e,n,s[0][s[1]])}else if("text"===n&&null!==s)o._setValue(e,n,s);else if("dataset"===n&&Utils.isPlainObject(s))for(let t in s)e.setAttribute("data-"+t,s[t]);else if("style"===n)if(Utils.isPlainObject(s))for(const t in s)e.style[t]=s[t];else e.style=s;else if(n.startsWith("on")&&Utils.isFunction(s))i?(void 0===m2d2.f&&(m2d2.f=[]),m2d2.f.push(s),e.setAttribute(n,"m2d2.f["+(m2d2.f.length-1)+"](event)")):e[n]=s;else if(s instanceof Date)o._setValue(e,n,s);else if(!o._hasAttrOrProp(e,n)||Utils.isObject(s)||"id"===n&&Utils.isNumeric(s)){let t=Utils.node(n,e);if(!t&&(t=Utils.node("#"+n,e),t||(t=Utils.node("."+n,e)),!t)){const t=function(t,i,n){const s=Utils.newNode(t);e.append(s),o._doRender(s,i,n)};if(-1!==o._htmlGenTags.indexOf(n)){t(n,s,i);continue}if(s&&Utils.isObject(s)&&void 0!==s.tagName){let e=s.tagName;delete s.tagName,t(e,s,i);continue}}t?o._doRender(t,s,i):console.log("No child or attribute found for: "+n+" in element: "+e.localName)}else{try{e[n]=s}catch(t){console.log("Unable to set property ["+n+"] in element: "+e.localName+". Read-only?")}if("boolean"!=typeof e[n]&&o._hasAttr(e,n)&&e.setAttribute(n,s),"value"===n){let t=e.onchange||null;void 0===e._orig_change&&(e._orig_change=t,e.onchange=function(){this.setAttribute(n,this.value),null!==this._orig_change&&this._orig_change()})}void 0===e._mutable&&(new MutationObserver((function(e){const t=e[0].target;void 0!==t._m2d2?e.forEach((function(e){const n=e.attributeName;let s=t._m2d2[n];const l="boolean"==typeof s?t[n]:t.getAttribute(n);if(void 0!==s&&s!=l){t._m2d2[n]=l;let e={};e[n]=l,o._setValues(t,e,i),void 0!==t._m2d2._update&&t._m2d2._update()}})):console.log("BUG: Unable to find m2d2 reference in node.")})).observe(e,{attributes:!0}),e._mutable=!0)}}}else o._setValue(e,null,t)}_setValue(e,t,i){let o=!1;if(null==t?void 0===i||null==i?(console.log("Value was undefined in element :"),console.log(e)):Utils.isPlainObject(i)&&void 0!==i.text?i=i.text:!Utils.isNumeric(i)&&Utils.isHtml(i)&&(o=!0):"html"===t&&(o=!0),o)e.innerHTML=i;else if("value"===t||null==t&&this._hasProp(e,"value")&&"LI"!==e.tagName)this._hasProp(e,"checked")?!0===i||"true"===i||1===i?e.setAttribute("checked",!0):!1===i||"false"===i||0===i?e.setAttribute("checked",!1):e.value=i:i instanceof Date?e.valueAsDate=i:e.value=i;else if(e.childElementCount>0){for(let t in e.childNodes){const o=e.childNodes[t];if(3===o.nodeType)return void o.replaceWith(i)}e.innerHTML=e.innerHTML+i}else e.innerText=i}_hasAttrOrProp(e,t){return this._hasAttr(e,t)||this._hasProp(e,t)}_hasAttr(e,t){let i=!1;if(e&&!Utils.isNumeric(t))switch(t){case"checked":i=void 0!==e.type&&("radio"===e.type||"checkbox"===e.type);break;default:i=e.hasAttribute(t)}return i}_hasProp(e,t){let i=!1;return e&&!Utils.isNumeric(t)&&(i=void 0!==e[t]&&!e.hasAttribute(t)),i}_defineProp(e,t,i){Utils.isObject(e)&&void 0===e[t]&&(Object.defineProperty(e,t,{enumerable:!1,writable:!0}),e[t]=i)}_setNode(e,t){this._defineProp(t,"_node",e),this._defineProp(e,"_m2d2",t)}_proxy(e,t){this._defineProp(e,"_proxy",!0);const i={get:function(t,o,n){if("m2d2"===o||"_"===o[0])return t[o];{const s=Reflect.get(t,o,n),l=Object.getOwnPropertyDescriptor(t,o);if(l&&!l.writable&&!l.configurable)return s;try{return Utils.isArray(e)&&!Utils.isNumeric(o)?t[o]:new Proxy(t[o],i)}catch(e){return s}}},defineProperty:function(e,i,o){return t(e,i,o),Reflect.defineProperty(e,i,o)},deleteProperty:function(e,i){return t(e,i),Reflect.deleteProperty(e,i)},set:function(e,i,o){return e[i]=o,t(e,i,{value:o}),void 0!==e._update&&e._update(),!0}};return new Proxy(e,i)}set data(e){this._data=e,this.update(this._data)}get data(){return this._data}}const m2d2=function(e,t,i){const o={},n=typeof e;switch(n){case"string":if(void 0===t)return o.data=e,null;o.root=e,Utils.isArray(t)&&(t={items:t}),o.data=t,o.template=i;break;case"object":e instanceof Node&&(o.root=e,e=t);case"function":Utils.isArray(e)&&(t={items:e}),o.data=e,o.template=i;break;default:return console.log("First argument passed to m2d2, with value: ("+e+") is of unknown type: "+n),null}return new M2D2(o).get()};M2D2.extend({show:function(e,t){const i=function(){return getComputedStyle(t,null).display};if(e){if("none"===i())if(t.dataset._m2d2_display)t.style.display=t.dataset._m2d2_display;else if(t.style.removeProperty("display"),"none"===i()){const e=function(){const e=document.getElementsByTagName("body")[0],i=document.createElement("template"),o=document.createElement(t.tagName);i.appendChild(o),e.appendChild(i);const n=getComputedStyle(o,null).display;return i.remove(),n}();t.style.display=t.dataset.display||("none"!==e?e:"block")}}else{const e="none"!==t.style.display?t.style.display:i();"none"!==e&&(t.dataset._m2d2_display=e),t.style.display="none"}}}),M2D2.extend({color:function(e,t){t.style.color=e},bgcolor:function(e,t){t.style.backgroundColor=e},css:function(e,t){t.className=e},"-css":function(e,t){let i=Utils.isArray(e)?e:e.split(" ");for(let e in i)t.classList.remove(i[e])},"+css":function(e,t){let i=Utils.isArray(e)?e:e.split(" ");for(let e in i)t.classList.add(i[e])}});
function TimerSrc(e,t){let n,r,u,l,a={};a.interval=e,a.checker=50,a.status="init";let i=(new Date).getTime();return n=i-e,a.call=function(e){return t=e,a},a.nocall=function(){return t=null,a},a.exec=function(){return t&&t(),n=(new Date).getTime(),a},a.check=function(){return u&&u(),a},a.play=function(){return u=a.step,a.status="running",a},a.pause=function(){return u=null,a.status="paused",a},a.destroy=function(){for(var e in u=null,clearInterval(r),r=null,a)a[e]=null,delete a[e];a.status="destroyed"},a.step=function(){return i=(new Date).getTime(),l=Math.max(0,a.interval-(i-n)),0===l&&(l=a.interval,n=(new Date).getTime(),t&&t()),a},a.slow=function(){return a.interval=1e3,a},a.fast=function(){return a.interval=e,a},r=setInterval(a.check,a.checker),a}
class NdJsonPlayer{fps;loop;showfirst;autoplay;path;playing=!1;loaded=!1;backwards=!1;onLoad;onRender;onFinish;onError;player=null;canvas=null;ctx=null;timer=null;src="";frame=0;multiplier=1;_numFrames=0;_totTime=0;_frames=[];_frameBase="";constructor(t,e,s,a,i,r,n){const o=this;o.src=t,window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame),o.onLoad=a||function(){},o.onRender=i||function(){},o.onFinish=r||function(){},o.onError=n||function(t){console.log(t)};let h=null;if(e instanceof Node)h=e;else{if("object"==typeof e)s=e,e="canvas";else if("string"!=typeof e)throw"Incorrect parameter passed to constructor of NdJsonPlayer";h=document.querySelector(e||"canvas")}if(!h)throw"Canvas element was not found in DOM: "+e;if("CANVAS"===h.tagName){o.canvas=h;const t=document.createElement("div");h.parentNode.insertBefore(t,h),t.prepend(h),h=t}else if(h.hasChildNodes()){if(o.canvas=h.querySelector("canvas"),!o.canvas)throw"No canvas found in element"}else o.canvas=document.createElement("CANVAS"),h.prepend(o.canvas);o.player=h,o.canvas.height=o.canvas.clientHeight,o.canvas.width=o.canvas.clientWidth,h.classList.add("ndjp"),o.ctx=o.canvas.getContext("2d"),o.fps=s.fps||24,o.loop=s.loop||!1,o.autoplay=s.autoplay||!1,o.showfirst=!1!==s.showfirst,o.path=s.path||"",o.timer=new TimerSrc(1e3/o.fps),o.load((function(t){void 0!==t.w&&(o.canvas.width=t.w),void 0!==t.h&&(o.canvas.height=t.h),void 0!==t.fb&&(o._frameBase=t.fb),void 0!==t.tf&&(o._numFrames=t.tf),void 0!==t.tt&&(o._totTime=t.tt),void 0!==t.fps&&(o.fps=t.fps,o.timer=new TimerSrc(1e3/o.fps)),void 0!==t.f?(o._frames.push(t),o.loaded||(o.loaded=!0,o.autoplay?o.play():o.showfirst&&o.step())):o.onRender(t)}))}load(t,e){const s=this;void 0!==e&&(this.src=e,this._frames=[]);const a=new TextDecoder;let i="";return fetch(s.src).then(t=>t.body.getReader()).then(e=>e.read().then((function r({value:n,done:o}){if(o)return t(JSON.parse(i)),void s.onLoad(s);const h=(i+a.decode(n,{stream:!0})).split(/[\r\n](?=.)/);return i=h.pop(),h.map(JSON.parse).forEach(t),e.read().then(r)}))).catch(t=>this.onError(t))}_render(t){if(null==this.timer)throw"TimerSrc was not initialized";if(0===this._frames.length)throw"Video is empty or no frames were found";this.frame>=this._frames.length&&(this.frame=this.loop?0:this._frames.length-1),this.frame<0&&(this.frame=this.loop?this._frames.length-1:0),this._displayImg(t)}_displayImg(t){const e=this,s=e._frames[e.frame],a=function(){e.onRender(s),e.timer.call((function(){t||(e._increment(),e.timer.nocall()),e._displayImg()}))};if(void 0!==s.f){const t=e._frameBase+s.f;e._image(t,a)}else e.onRender(s),a()}_increment(){this.frame+=this.multiplier*(this.backwards?-1:1),this.frame<0&&(this.loop?this.frame=this._frames.length-1:(this.frame=0,this.pause())),this.frame>this._frames.length-1&&(this.loop?this.frame=0:(this.frame=this._frames.length-1,this.pause()))}_draw=function(t,e){const s=this;return 0===t.width&&0===t.height?(t.onerror(),void 0!==e&&e(!1)):(s.ctx.save(),s.ctx.drawImage(t,0,0,t.width,t.height,0,0,s.canvas.width,s.canvas.height),s.ctx.restore(),void 0!==e&&e(!0)),this};_image=function(t,e){const s=this,a=new Image;return a.crossOrigin="",a.onload=function(){s._draw(a,(function(t){t&&void 0!==e&&e(a)}))},a.onerror=function(){const t=s.onError();t&&(a.src=t)},a.src="/"===t[0]||t.match(/^https?:/)||t.match(/^data:image/)?t:s.path+t,this};frameBase(){return this._frameBase}currentFrame(){return this.frame}totalFrames(){return this._numFrames||this._frames.length}totalTime(){return this._totTime||this.currentFrame()/this.fps}frameAt(t){const e=this;let s=t<this.totalFrames()?e._frames[t]:null;return s&&(s.fb=e._frameBase),s}indexAt(t){return~~(t*this.totalFrames()/100)}playerNode(){return this.player}play(t){t<0?t=0:t>this._frames.length?t=this._frames.length-1:void 0!==t&&(this.frame=1*t),this.playing=!0,this.timer.play(),this._render(!1)}playForward(t){this.backwards=!1,this.play(t)}playBackwards(t){this.backwards=!0,this.play(t)}pause(){this.playing=!1,this.timer.pause()}stop(){this.playing=!1,this.frame=0,this.timer.pause(),this._displayImg(!0)}step(t){t<0?t=0:t>this._frames.length?t=this._frames.length-1:void 0!==t&&(this.frame=1*t),this.playing=!1,this.timer.step(),this._render(!0)}stepForwards(){this.backwards=!1,this.step()}stepBackwards(){this.backwards=!0,this.step()}reset(){return void 0!==this.ctx.reset&&(this.ctx.reset(),this.ctx.clear(),this.stop(),this.canvas.width=this.canvas.width),this}}
class NDJPlayer{ndjp;options;ui;onAction;constructor(t,s,e,n,i,a){const o=this;this.options=Object.assign({controls:!1,play:!0,stop:!1,step:!1,progress:!0,thumbs:!0,fullscreen:!1,speed:!1,lapse:!0,frames:!0,resize:!0},e||{}),this.onAction=a||function(){},this._create(s),this.ndjp=new NdJsonPlayer(t,s,e,n,(function(t){o._onUpdate(t),void 0!==i&&i(t)}),(function(){o.stop()}),(function(t){}))}_onUpdate(t){this.ui.frames.text=this.ndjp.currentFrame()+1+"/"+this.ndjp.totalFrames(),this.ui.lapse.text=void 0!==t.t?t.t+(this.ndjp._totTime>0?"/"+this.ndjp.totalTime():""):this._fmtTime(this.ndjp.totalTime()),this.ui.progress.value=(this.ndjp.currentFrame()+1)/this.ndjp.totalFrames()*100,this._adjustSize()}_adjustSize(){if(this.options.resize){let t=this.ndjp.player,s=this.ndjp.player.parentElement;if(t.clientHeight>s.clientHeight){let e=this.ndjp.canvas.height/this.ndjp.canvas.width,n=this.ndjp.canvas.width/this.ndjp.canvas.height;this.ndjp.canvas.height=s.clientHeight-t.querySelector(".controls").clientHeight,this.ndjp.canvas.width=s.clientWidth*(e<1?e:n)}}}_create(t){const s=this;s.ui=m2d2(t,{html:s._getUI(t),play:{show:s.options.play,title:"Play",text:"▶️",href:"#",onclick:function(){return s.onAction("play",s.ndjp,s),s.ndjp.play(),s.ui.play.show=!1,s.ui.pause.show=!0,!1}},pause:{show:s.options.pause,title:"Pause",text:"⏸️",href:"#",onclick:function(){return s.onAction("pause",s.ndjp,s),s.ndjp.pause(),s.ui.play.show=!0,s.ui.pause.show=!1,!1}},stop:{show:s.options.stop,title:"Stop",text:"⏹️",href:"#",onclick:function(){return s.onAction("stop",s.ndjp,s),s.ndjp.stop(),!1}},lapse:{show:s.options.lapse,title:"Time elapsed / Time Total",text:"0:00"},frames:{show:s.options.frames,title:"Current Frame / Total Frames",text:"0"},progress:{show:s.options.progress,value:0,max:100,onmousemove:function(t){let e=~~(t.offsetX/this.offsetWidth*100),n=s.ndjp.frameAt(s.ndjp.indexAt(e));if(n){s.ui.thumb.show=!0,s.ui.thumb.img.src=s.ndjp.frameBase()+(n.th||n.f),void 0!==n.tc&&(s.ui.thumb.caption=n.tc);let e=s.ui.thumb._node;e.style.left=this.offsetLeft+t.offsetX-e.clientWidth/2+"px"}else s.ui.thumb.show=!1},onmouseleave:function(){s.ui.thumb.show=!1},onclick:function(t){let e=~~(t.offsetX/this.offsetWidth*100),n=s.ndjp.indexAt(e);s.ndjp.step(n),s.onAction("progress",s.ndjp,s)}},thumb:{show:!1,img:{src:""},caption:""}})}_fmtTime(t){let s=(t=t.toFixed(2)).split(".")[1]||"00";return(~~(t/60)+"").padStart(2,"0")+":"+(~~(t/60%1*60)+"").padStart(2,"0")+"."+s}_getUI(t){let s="";switch(this.options.controls){case"":case"basic":case!0:s=this._getBasicUI();break;case"common":s=this._getCommonUI();break;case"full":s=this._getFullUI()}this.options.controls;let e=t instanceof Node?t:document.querySelector(t);if(e){e.querySelector("canvas")||(s="<canvas></canvas>"+s)}else console.log("Root element: "+t+" was not found in document"),s="<canvas></canvas>"+s;return(t.innerHTML||"")+s}_getBasicUI(){return'<caption></caption>\n<div class="controls">\n<a class="play"></a>\n<a class="pause"></a>\n<label class="lapse"></label>\n<figure class="thumb"><img /><figcaption class="caption"></figcaption></figure>\n<progress></progress>\n</div>'}_getCommonUI(){return'<caption></caption>\n<div class="controls">\n<a class="play"></a>\n<a class="pause"></a>\n<label class="lapse"></label>\n<progress></progress>\n<label class="frames"></label>\n<figure class="thumb"><img /><figcaption class="caption"></figcaption></figure>\n</div>'}_getFullUI(){return'<caption></caption>\n<div class="controls">\n<a class="play"></a>\n<a class="pause"></a>\n<a class="stop"></a>\n<label class="lapse"></label>\n<progress></progress>\n<label class="frames"></label>\n<figure class="thumb"><img /><figcaption class="caption"></figcaption></figure>\n</div>'}}
class VideoND extends HTMLElement{constructor(){super();const t={autoplay:!1,controls:!1,loop:!1,width:"auto",height:"auto",poster:"",preload:"auto",src:"",cc:"auto",caption:"",fullscreen:!1,fps:"",speed:!1,autosize:"auto",sizes:{}||[],thumbs:"auto"},o={};for(let e in t)o[e]=this.getAttribute(e)||this.hasAttribute(e)||t[e];this.style.display="block",this.className="ndjp",this._root=this;const e=this,n=new NDJPlayer(o.src,this,o,(function(t){void 0!==e.onload&&e.onload(t)}),(function(t){void 0!==e.onrender&&e.onrender(t,n.ndjp,n,n.ndjp.canvas,n.ndjp.ctx)}),(function(t,o,n){void 0!==e.onaction&&e.onaction(t,o,n)}))}setCaption(t){this._root.querySelector("caption").innerText=t}static get observedAttributes(){return["width","height","caption"]}attributeChangedCallback(t,o,e){"caption"===t&&this.setCaption(e)}}document.addEventListener("DOMContentLoaded",(function(){window.customElements.define("video-nd",VideoND)}));